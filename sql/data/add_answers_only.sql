USE graduate_surveys;

-- Сначала проверим структуру вопросов (если они есть)
SELECT 'Существующие вопросы:' as info;
SELECT * FROM questions LIMIT 5;

-- Если вопросов нет, создадим несколько простых
INSERT IGNORE INTO questions (section_id, question_text, section_order) VALUES
(1, 'Насколько вы довольны качеством образования?', 1),
(1, 'Порекомендовали бы вы наш университет?', 2),
(1, 'Оцените качество преподавания', 3),
(2, 'Устроились ли вы по специальности?', 1),
(2, 'Ваш текущий уровень дохода?', 2);

-- Добавим варианты ответов
INSERT IGNORE INTO choices (question_id, choice_text, choice_order) VALUES
(1, 'Очень доволен', 1),
(1, 'Доволен', 2),
(1, 'Нейтрально', 3),
(1, 'Не доволен', 4),
(2, 'Определенно да', 1),
(2, 'Вероятно да', 2),
(2, 'Затрудняюсь ответить', 3),
(2, 'Вероятно нет', 4),
(3, 'Отлично', 1),
(3, 'Хорошо', 2),
(3, 'Удовлетворительно', 3),
(3, 'Плохо', 4),
(4, 'Да, полностью по специальности', 1),
(4, 'Частично по специальности', 2),
(4, 'Нет, работаю в другой сфере', 3),
(5, 'До 50 000 руб.', 1),
(5, '50 000 - 100 000 руб.', 2),
(5, '100 000 - 150 000 руб.', 3),
(5, 'Свыше 150 000 руб.', 4);

-- Добавляем ответы от 20 выпускников на оба опроса
INSERT IGNORE INTO answers (survey_id, graduate_id, question_id, choice_id) VALUES
-- Опрос 1: Удовлетворенность (выпускники 1-10)
(1, 1, 1, 1), (1, 1, 2, 1), (1, 1, 3, 2),
(1, 2, 1, 2), (1, 2, 2, 1), (1, 2, 3, 1),
(1, 3, 1, 3), (1, 3, 2, 3), (1, 3, 3, 3),
(1, 4, 1, 1), (1, 4, 2, 1), (1, 4, 3, 1),
(1, 5, 1, 4), (1, 5, 2, 4), (1, 5, 3, 4),
(1, 6, 1, 2), (1, 6, 2, 2), (1, 6, 3, 2),
(1, 7, 1, 1), (1, 7, 2, 1), (1, 7, 3, 1),
(1, 8, 1, 3), (1, 8, 2, 3), (1, 8, 3, 3),
(1, 9, 1, 2), (1, 9, 2, 1), (1, 9, 3, 2),
(1, 10, 1, 1), (1, 10, 2, 1), (1, 10, 3, 1),

-- Опрос 2: Трудоустройство (выпускники 11-20)
(2, 11, 4, 1), (2, 11, 5, 3),
(2, 12, 4, 2), (2, 12, 5, 2),
(2, 13, 4, 3), (2, 13, 5, 1),
(2, 14, 4, 1), (2, 14, 5, 4),
(2, 15, 4, 2), (2, 15, 5, 2),
(2, 16, 4, 1), (2, 16, 5, 3),
(2, 17, 4, 3), (2, 17, 5, 1),
(2, 18, 4, 2), (2, 18, 5, 2),
(2, 19, 4, 1), (2, 19, 5, 4),
(2, 20, 4, 2), (2, 20, 5, 2);

SELECT 'Данные успешно добавлены!' as status;
SELECT COUNT(*) as total_answers FROM answers;

-- Статистика по опросам
SELECT 'Статистика ответов:' as info;
SELECT s.survey_id, s.title, COUNT(a.answer_id) as total_answers
FROM surveys s 
LEFT JOIN answers a ON s.survey_id = a.survey_id 
GROUP BY s.survey_id, s.title;
